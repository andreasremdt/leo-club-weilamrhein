---
import CategorySelector from "@/components/category-selector.astro";
import PostPreview from "@/components/post-preview.astro";
import PageLayout from "@/layouts/page-layout.astro";
import { getPostExcerpt, getPostThumbnail } from "@/lib/helpers";

const posts = (await Astro.glob("./weitere/*.md")).sort(
  (a, b) =>
    new Date(b.frontmatter.date).valueOf() -
    new Date(a.frontmatter.date).valueOf(),
);
---

<PageLayout
  title="Weitere Aktionen"
  description="Andere Aktionen, etwa der Osterhase oder Weihnachtsmann im Rheincenter."
>
  <main>
    <CategorySelector />

    {
      posts.map((post) => (
        <PostPreview
          title={post.frontmatter.title}
          date={post.frontmatter.date}
          url={post.url as string}
          thumbnail={getPostThumbnail(post)}
          excerpt={getPostExcerpt(post)}
        />
      ))
    }
  </main>
</PageLayout>
