---
import SocialLinks from "./social-links.astro";
import LatestPosts from "./latest-posts.astro";
import Title from "./title.astro";
import Gallery from "./gallery.astro";
import Link from "./link.astro";
import { getCategoryFromUrl } from "../helpers";

const today = new Date().getFullYear();
const images = (await Astro.glob("../pages/aktionen/**/*.md"))
  .sort((a, b) => new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf())
  .filter((post) => Boolean(post.frontmatter.images))
  .slice(0, 6)
  .map((post) => ({
    src: post.frontmatter.images[0],
    category: getCategoryFromUrl(post.url as string),
    alt: post.frontmatter.title,
  }));
---

<footer class="footer">
  <div class="container inner">
    <section>
      <Title as="h3">Über Uns</Title>
      <p>
        Wir sind Jugendliche und Erwachsene und engagieren uns für das Wohl von benachteiligten Menschen, etwa aus
        Kinder- oder Pflegeheimen.
      </p>

      <p>
        <a href="https://www.leo-clubs.de/" target="_blank" rel="noopener nofollow noreferrer">
          Erfahre mehr über Leo-Clubs in Deutschland
        </a>
      </p>
    </section>
    <section>
      <Title as="h3">Aktuelles</Title>

      <LatestPosts />
    </section>
    <section>
      <Title as="h3">Bilder</Title>

      <Gallery images={images} width={100} height={100} galleryId="footer" />
    </section>
    <section>
      <Title as="h3">Menu</Title>

      <ul>
        <li>
          <Link class="link" href="/">Startseite</Link>
        </li>
        <li>
          <Link class="link" href="/aktionen/">Aktionen</Link>
        </li>
        <li>
          <Link class="link" href="/ueber-uns/">Über Uns</Link>
        </li>
        <li>
          <Link class="link" href="/mitglied-werden/">Mitglied werden</Link>
        </li>
        <li>
          <Link class="link" href="/kontakt/">Kontakt</Link>
        </li>
        <li>
          <Link class="link" href="/impressum/">Impressum</Link>
        </li>
        <li>
          <Link class="link" href="/datenschutz/">Datenschutz</Link>
        </li>
        <li>
          <Link class="link" href="/sitemap/">Sitemap</Link>
        </li>
      </ul>
    </section>
  </div>

  <div class="lower">
    <div class="container wrapper">
      <SocialLinks hasText />

      <p class="copyright">
        &copy; {today}
        <a href="/">Leo-Club Weil am Rhein</a>
        . Alle Rechte vorbehalten.
      </p>
    </div>
  </div>
</footer>

<style>
  .footer {
    background-color: white;
    border-top: 1px solid var(--clr-gray-200);
    box-shadow: 0 -2px 4px hsla(0, 0%, 0%, 0.07);
    padding-block: 2rem;
  }

  .inner {
    display: grid;
    gap: 2rem;
    grid-template-columns: repeat(4, 1fr);
  }

  .link {
    transition: color 0.1s linear;
  }

  .link:where(:hover, :focus-visible, .active) {
    color: var(--clr-primary);
  }

  .lower {
    border-top: 1px solid var(--clr-gray-200);
    margin-top: 2rem;
    padding-top: 2rem;
    font-family: var(--ff-sans);
    text-transform: uppercase;
    font-size: 14px;
  }

  .wrapper {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
  }

  @media (max-width: 1100px) {
    .inner {
      grid-template-columns: repeat(2, 1fr);
    }

    .wrapper {
      justify-content: center;
    }

    .navigation {
      width: 100%;
      margin-bottom: 0.5rem;
      justify-content: center;
    }
  }

  @media (max-width: 600px) {
    .inner {
      grid-template-columns: 1fr;
    }

    .lower,
    .copyright {
      font-size: 12px;
    }

    .copyright {
      text-align: center;
    }
  }
</style>
