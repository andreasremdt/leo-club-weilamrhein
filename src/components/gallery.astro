---
import type { HTMLAttributes } from "astro/types";
import { Picture } from "astro:assets";

export interface Props extends HTMLAttributes<"div"> {
  images: {
    src: string;
    alt?: string;
  }[];
  width: number;
  height: number;
  galleryId: string;
}

const { images, width, height, galleryId, class: className } = Astro.props;
---

<figure class:list={["grid grid-cols-3 gap-1", className]}>
  {
    images.map((image) => (
      <a
        href={image.src}
        data-fancybox={galleryId}
        class="overflow-hidden bg-yellow-600"
      >
        <Picture
          src={image.src}
          formats={["avif", "webp"]}
          alt={image.alt || ""}
          width={width}
          height={height}
          quality={80}
          class="aspect-square object-cover transition-all duration-300 hover:scale-110 hover:opacity-70"
        />
      </a>
    ))
  }
</figure>

<script>
  import { Fancybox } from "@fancyapps/ui";
  import "@fancyapps/ui/dist/fancybox/fancybox.css";

  Fancybox.bind("[data-fancybox]", {
    Thumbs: false,
  });
</script>
