---
import { Picture } from "astro:assets";
import { formatDate } from "@/lib/utils";

export interface Props {
  title: string;
  url: string;
  excerpt: string;
  date: Date;
  thumbnail?: string;
}

let { title, url, excerpt, date, thumbnail } = Astro.props;
---

<article class="box mb-4 p-0 sm:flex md:mb-8">
  {
    thumbnail ? (
      <figure class="sm:aspect-square sm:w-1/3 sm:flex-shrink-0">
        <Picture
          src={thumbnail}
          formats={["avif", "webp"]}
          alt={title}
          width={400}
          height={400}
          quality={80}
          class="aspect-video w-full object-cover sm:aspect-auto sm:h-full"
          pictureAttributes={{ class: "bordered sm:h-full" }}
        />
      </figure>
    ) : null
  }

  <div class="p-4 md:p-8">
    <h2 class="h2">
      <a
        class="outline-none transition-colors hover:text-yellow-600 focus-visible:text-yellow-600 focus-visible:ring-4 focus-visible:ring-yellow-600/20"
        href={`/aktionen/${url}`}>{title}</a
      >
    </h2>

    <time datetime={date.toISOString()} class="text-sm text-stone-500">
      Ver√∂ffentlicht am {formatDate(date)}
    </time>

    <p class="my-4">{excerpt}...</p>

    <a class="button" href={url}>Weiterlesen</a>
  </div>
</article>
